{
  "DisplayName": "Minecraft (CurseForge Auto-Update)",
  "Description": "Self-bootstrapping template: auto-fetches updater scripts on first Update.",
  "Tags": [
    "minecraft",
    "curseforge",
    "neoforge",
    "forge",
    "fabric",
    "auto-update",
    "bootstrap"
  ],
  "Icon": "https://raw.githubusercontent.com/CubeCoders/AMPTemplates/main/icons/minecraft.png",
  "DataDirectory": ".",
  "PortOverrides": [
    {
      "Name": "GamePort",
      "Description": "Minecraft Server",
      "DefaultPort": 25565,
      "Protocol": "TCP"
    },
    {
      "Name": "RconPort",
      "Description": "RCON (optional)",
      "DefaultPort": 25575,
      "Protocol": "TCP"
    }
  ],
  "Variables": [
    {
      "Name": "UPDATE_MODE",
      "DisplayName": "Update Mode",
      "DefaultValue": "safe-sync",
      "Options": [
        "safe-sync",
        "clean-replace",
        "new-folder"
      ]
    },
    {
      "Name": "CF_API_KEY",
      "DisplayName": "CurseForge API Key",
      "DefaultValue": "",
      "Secret": true
    },
    {
      "Name": "CF_PAGE_URL",
      "DisplayName": "CurseForge Page URL (optional)",
      "DefaultValue": ""
    },
    {
      "Name": "CF_SLUG",
      "DisplayName": "CurseForge Slug (alt to URL)",
      "DefaultValue": ""
    },
    {
      "Name": "CF_FILE_ID",
      "DisplayName": "Pin to File ID (optional)",
      "DefaultValue": ""
    },
    {
      "Name": "SYNC_PRUNE",
      "DisplayName": "Prune old pack files (sync mode)",
      "DefaultValue": "true"
    },
    {
      "Name": "SYNC_EXCLUDE_GLOBS",
      "DisplayName": "Sync Exclude (comma globs)",
      "DefaultValue": "world*,server.properties,ops.json,whitelist.json,banned-*.json,config,local,journeymap,eula.txt"
    },
    {
      "Name": "EXCLUDE_MOD_IDS",
      "DisplayName": "Exclude Mods by ID (comma)",
      "DefaultValue": ""
    },
    {
      "Name": "INCLUDE_MOD_IDS",
      "DisplayName": "Force Include Mods by ID (comma)",
      "DefaultValue": ""
    },
    {
      "Name": "REMOVE_PATHS",
      "DisplayName": "Paths to Remove (clean-replace)",
      "DefaultValue": "kubejs,defaultconfigs,mods,config"
    },
    {
      "Name": "REMOVE_LIBRARIES_IF_LOADER_CHANGED",
      "DisplayName": "Remove libraries/ if loader changed",
      "DefaultValue": "true"
    },
    {
      "Name": "PRESERVE_PATHS",
      "DisplayName": "Preserve Paths (new-folder)",
      "DefaultValue": "world,world_nether,world_the_end,server.properties,ops.json,whitelist.json,banned-players.json,banned-ips.json,config,local,journeymap,eula.txt"
    },
    {
      "Name": "RULES_JSON",
      "DisplayName": "Advanced Rules (JSON)",
      "Type": "multiline",
      "DefaultValue": "{\n  \"delete_when\": [\n    {\n      \"predicate\": \"loader_changed\",\n      \"paths\": [\n        \"libraries\"\n      ]\n    }\n  ],\n  \"delete_always\": [],\n  \"transform\": []\n}"
    },
    {
      "Name": "PRE_UPDATE_HOOK",
      "DisplayName": "Pre-Update Hook (bash)",
      "Type": "multiline",
      "DefaultValue": ""
    },
    {
      "Name": "POST_UPDATE_HOOK",
      "DisplayName": "Post-Update Hook (bash)",
      "Type": "multiline",
      "DefaultValue": ""
    },
    {
      "Name": "DRY_RUN",
      "DisplayName": "Dry Run (log only)",
      "DefaultValue": "false"
    },
    {
      "Name": "JAVA_PATH",
      "DisplayName": "Java Path",
      "DefaultValue": "java"
    },
    {
      "Name": "Xms",
      "DisplayName": "Min Memory (Xms)",
      "DefaultValue": "4G"
    },
    {
      "Name": "Xmx",
      "DisplayName": "Max Memory (Xmx)",
      "DefaultValue": "8G"
    },
    {
      "Name": "JAVA_ARGS",
      "DisplayName": "Extra JVM Args",
      "DefaultValue": "-XX:+UseG1GC -Dfile.encoding=UTF-8"
    },
    {
      "Name": "SERVER_JAR",
      "DisplayName": "Exact server JAR filename (optional)",
      "DefaultValue": ""
    },
    {
      "Name": "JAR_GLOB",
      "DisplayName": "JAR glob (optional, picks newest match)",
      "DefaultValue": ""
    },
    {
      "Name": "JAR_PRIORITY",
      "DisplayName": "Auto-detect priority",
      "DefaultValue": "libraries-first",
      "Options": [
        "libraries-first",
        "root-first",
        "newest-anywhere"
      ]
    },
    {
      "Name": "SNAPSHOT_ENABLED",
      "DisplayName": "Enable pre-update snapshot",
      "DefaultValue": "true"
    }
  ],
  "Executable": {
    "Start": "./scripts/start-detected.sh",
    "Update": "/bin/bash -lc '   [[ -x ./scripts/cf-sync.sh && -x ./scripts/start-detected.sh ]] || (     mkdir -p scripts &&     curl -fsSL https://raw.githubusercontent.com/crameep/amp-cf-updater/main/scripts/cf-sync.sh -o scripts/cf-sync.sh &&     curl -fsSL https://raw.githubusercontent.com/crameep/amp-cf-updater/main/scripts/start-detected.sh -o scripts/start-detected.sh &&     chmod +x scripts/*.sh   );   /bin/bash ./scripts/cf-sync.sh'"
  }
}